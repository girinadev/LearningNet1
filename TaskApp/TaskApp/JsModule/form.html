<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8" />
  <title>Check in</title>
  <script src="lib/bnd.js"></script>
</head>
<body>
  <form>
    <div>
      <p>WHERE</p>//https://knockoutjs.com/documentation/options-binding.html
      <select name="where" data-bind="options: availableHotels,
                                      optionsText: 'title',
                                      value: 'id'">
        <option selected="selected" value="0">Anywhere</option>
      </select>
    </div>
    <div>
      <p>CHECK-IN</p>
      <input type="text" name="checkIn" value="" data-bind="text: checkIn" placeholder="mm/dd/yyyy" />
    </div>
    <div>
      <p>CHECKOUT</p>
      <input type="text" name="checkOut" value="" data-bind="text: checkOut" placeholder="mm/dd/yyyy" />
    </div>
    <div>
      <input type="submit" value="Calculate" data-bind="click: calculateCost" />
    </div>
  </form>

  <div>
    <p>
      Стоимость <span data-bind="text: nightsCount">{nightsCount}</span> в выбранном отеле стоит
      <span data-bind="text: totalPrice">{totalPrice}</span>
    </p>
  </div>

  <script type="text/javascript">
    Date.prototype.addDays = function (days) {
      var date = new Date(this.valueOf());
      date.setDate(date.getDate() + days);
      return date;
    }

    let vm = {
      checkIn: new Date(Date.now()),
      checkOut: new Date(Date.now()).addDays(5),
      nightsCount: 0,
      totalPrice: 0.00,
      destId: 0,
      availableHotels: [{ id: 1, title: "Hotel1", price: 500.00 }, { id: 2, title: "Hotel2", price: 200.00 }],

      calculateCost: function (e) {
        let self = this;

        const hotel = self.availableHotels.find(h => { return h.id === self.destId; });
        if (hotel) {
          self.nightsCount = Math.abs(self.checkOut - self.checkIn);
          self.totalPrice = self.nightsCount * hotel.price;
        }

        e.preventDefault();
      }
    };
    Binder.init(vm);
  </script>
</body>
</html>
<!--
https://habr.com/ru/post/231883/
https://tuhub.ru/posts/javascript-moduli-rukovodstvo-dlya-nachinayushhih
https://www.wintellect.com/data-binding-pure-javascript/
-->
